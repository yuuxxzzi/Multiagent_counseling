# AI 멀티에이전트 상담 시스템 - 웹 버전

## 🎯 개요

main.py의 멀티에이전트 상담 시스템을 웹 인터페이스로 구현한 버전입니다.

## ✨ 주요 기능

### 🤖 멀티에이전트 시스템
- **AssistantAgent**: 일반 상담 응답
- **MindfulnessAgent**: 마인드풀니스 개입
- **RoleplayAgent**: 롤플레잉 시뮬레이션
- **MemoryAgent**: 세션 요약 보고서 생성

### 🎭 롤플레잉 기능
- 사용자의 상담 내용을 기반으로 구체적인 역할 설정
- 현실적인 시나리오 생성
- 무제한 롤플레잉 (사용자가 종료할 때까지)
- 마인드풀니스 개입 후에도 롤플레잉 계속 진행

### 🧘 마인드풀니스 개입
- 감정 분석 기반 자동 개입
- 롤플레잉 중에도 자연스럽게 작동

### 📊 세션 관리
- 실시간 감정 분석
- 세션별 상태 유지
- 종료 시 요약 보고서 생성

## 🚀 설치 및 실행

### 1. 의존성 설치
```bash
pip install -r requirements_web.txt
```

### 2. 환경 변수 설정
`.env` 파일을 생성하고 OpenAI API 키를 설정하세요:
```
OPENAI_API_KEY=your_openai_api_key_here
```

### 3. 웹 애플리케이션 실행
```bash
python run_web.py
```

### 4. 브라우저에서 접속
```
http://localhost:5000
```

## 🎨 웹 인터페이스 특징

### 💬 채팅 인터페이스
- 실시간 채팅
- 감정 분석 결과 표시
- 마인드풀니스 개입 표시
- 롤플레잉 모드 표시

### 🎛️ 컨트롤 기능
- **롤플레잉 시작**: 수동으로 롤플레잉 트리거
- **세션 종료**: 요약 보고서 생성 및 세션 종료

### 📱 반응형 디자인
- 모바일 친화적 인터페이스
- 아름다운 그라데이션 디자인
- 직관적인 사용자 경험

## 🔧 API 엔드포인트

### POST /chat
사용자 메시지를 처리하고 AI 응답을 반환합니다.

**요청:**
```json
{
  "message": "사용자 메시지"
}
```

**응답:**
```json
{
  "success": true,
  "responses": [
    {
      "type": "emotion",
      "content": {"emotion_class": "슬픔", "emotion_score": 0.7}
    },
    {
      "type": "assistant",
      "content": "상담사 응답"
    }
  ],
  "roleplay_active": false
}
```

### POST /trigger_roleplay
롤플레잉을 수동으로 시작합니다.

**요청:**
```json
{
  "topic": "갈등 상황 대화 연습"
}
```

### POST /end_session
세션을 종료하고 요약 보고서를 생성합니다.

## 🎯 사용 시나리오

### 1. 일반 상담
1. 사용자가 메시지 입력
2. 감정 분석 수행
3. 상담사 응답 생성
4. 필요시 마인드풀니스 개입

### 2. 롤플레잉
1. "롤플레잉 시작" 버튼 클릭
2. 주제 입력 (예: "갈등 상황 대화 연습")
3. 상담 내용 기반 시나리오 생성
4. 구체적인 역할 설정
5. 무제한 롤플레잉 진행

### 3. 세션 종료
1. "세션 종료" 버튼 클릭
2. 요약 보고서 생성
3. 감정 변화 그래프 생성
4. 세션 데이터 정리

## 🛠️ 개발자 정보

- **Flask**: 웹 프레임워크
- **JavaScript**: 프론트엔드 인터랙션
- **CSS**: 반응형 디자인
- **OpenAI GPT**: AI 에이전트

## 📝 주의사항

- OpenAI API 키가 필요합니다
- 인터넷 연결이 필요합니다
- 세션 데이터는 메모리에 저장되므로 서버 재시작 시 초기화됩니다

## 🔄 업데이트 내역

- **v1.0**: 기본 웹 인터페이스 구현
- **v1.1**: 롤플레잉 기능 추가
- **v1.2**: 마인드풀니스 개입 개선
- **v1.3**: 세션 관리 및 요약 보고서 기능 추가
